digraph {
start -> load_config;
load_config -> update;
load_config -> get_latest_unplayed_urls;
load_config -> get_latest_urls;

subgraph cluster_0 {

    update -> allupdated;

    allupdated -> get_rss[label="no"];
    get_rss -> add_entry;
    add_entry -> allupdated;

    allupdated[label="Are they\nall updated?"]
}    
    
    
subgraph cluster_1 {    
    get_latest_unplayed_urls -> loop;
    loop -> download_episode[label="no"];
    download_episode -> mark_played;
    mark_played -> loop;

    get_latest_urls -> output_playlist;

    loop[label="Have you downloaded\nall new episodes?"]


}
loop -> exit[label="yes"];
output_playlist -> exit;
allupdated -> exit[label="yes"];
}
